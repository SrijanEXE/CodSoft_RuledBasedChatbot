<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SrijanGPT - AI Assistant</title>
    <style>
        * {
            box-sizing: border-box;
        }
        
        body, html {
            width: 100%; 
            height: 100%; 
            margin: 0; 
            padding: 0;
            font-family: 'Inter', 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
            background: #f4f4f4;
            color: #222;
            transition: all 0.3s ease;
            overflow: hidden;
            position: relative;
        }
        
        .dark-theme { 
            background: #181a1b;
            color: #e0e0e0;
        }

        /* Enhanced Animated Background */
        .animated-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
            border-radius: 0;
        }

        /* Main floating particles */
        .bg-particles {
            position: absolute;
            width: 100%;
            height: 100%;
        }

        .particle {
            position: absolute;
            border-radius: 50%;
            opacity: 0.3;
            animation: float 30s infinite linear;
            filter: blur(1px);
        }

        .light-particle {
            background: linear-gradient(45deg, #ff9a9e, #fecfef, #fecfef);
            box-shadow: 0 0 40px rgba(255, 154, 158, 0.3);
        }

        .dark-particle {
            background: linear-gradient(45deg, #4facfe, #00f2fe, #43e97b);
            box-shadow: 0 0 40px rgba(79, 172, 254, 0.3);
        }

        .particle:nth-child(1) { width: 120px; height: 120px; left: 5%; animation-delay: 0s; animation-duration: 35s; }
        .particle:nth-child(2) { width: 180px; height: 180px; left: 15%; animation-delay: 4s; animation-duration: 40s; }
        .particle:nth-child(3) { width: 100px; height: 100px; left: 25%; animation-delay: 8s; animation-duration: 30s; }
        .particle:nth-child(4) { width: 140px; height: 140px; left: 35%; animation-delay: 12s; animation-duration: 45s; }
        .particle:nth-child(5) { width: 110px; height: 110px; left: 45%; animation-delay: 16s; animation-duration: 32s; }
        .particle:nth-child(6) { width: 130px; height: 130px; left: 55%; animation-delay: 20s; animation-duration: 38s; }
        .particle:nth-child(7) { width: 90px; height: 90px; left: 65%; animation-delay: 24s; animation-duration: 28s; }
        .particle:nth-child(8) { width: 160px; height: 160px; left: 75%; animation-delay: 28s; animation-duration: 42s; }
        .particle:nth-child(9) { width: 105px; height: 105px; left: 85%; animation-delay: 32s; animation-duration: 34s; }

        @keyframes float {
            0% {
                transform: translateY(100vh) rotate(0deg) scale(0.7);
                opacity: 0;
            }
            10% {
                opacity: 0.3;
                transform: translateY(90vh) rotate(45deg) scale(1);
            }
            50% {
                opacity: 0.4;
                transform: translateY(50vh) rotate(180deg) scale(1.1);
            }
            90% {
                opacity: 0.3;
                transform: translateY(10vh) rotate(315deg) scale(1);
            }
            100% {
                transform: translateY(-100px) rotate(360deg) scale(0.7);
                opacity: 0;
            }
        }

        /* Floating dots */
        .floating-dots {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .floating-dot {
            position: absolute;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            opacity: 0.5;
            animation: float-dot 25s infinite linear;
        }

        .light-dot {
            background: #ff9a9e;
            box-shadow: 0 0 20px rgba(255, 154, 158, 0.5);
        }

        .dark-dot {
            background: #4facfe;
            box-shadow: 0 0 20px rgba(79, 172, 254, 0.5);
        }

        .floating-dot:nth-child(1) { left: 8%; animation-delay: 0s; animation-duration: 20s; }
        .floating-dot:nth-child(2) { left: 18%; animation-delay: 3s; animation-duration: 28s; }
        .floating-dot:nth-child(3) { left: 28%; animation-delay: 6s; animation-duration: 24s; }
        .floating-dot:nth-child(4) { left: 38%; animation-delay: 9s; animation-duration: 26s; }
        .floating-dot:nth-child(5) { left: 48%; animation-delay: 12s; animation-duration: 22s; }
        .floating-dot:nth-child(6) { left: 58%; animation-delay: 15s; animation-duration: 30s; }
        .floating-dot:nth-child(7) { left: 68%; animation-delay: 18s; animation-duration: 25s; }
        .floating-dot:nth-child(8) { left: 78%; animation-delay: 21s; animation-duration: 32s; }
        .floating-dot:nth-child(9) { left: 88%; animation-delay: 24s; animation-duration: 18s; }
        .floating-dot:nth-child(10) { left: 98%; animation-delay: 27s; animation-duration: 35s; }

        @keyframes float-dot {
            0% {
                transform: translateY(100vh) scale(0) rotate(0deg);
                opacity: 0;
            }
            15% {
                opacity: 0.5;
                transform: translateY(85vh) scale(1) rotate(45deg);
            }
            50% {
                opacity: 0.6;
                transform: translateY(50vh) scale(1.2) rotate(180deg);
            }
            85% {
                opacity: 0.5;
                transform: translateY(15vh) scale(1) rotate(315deg);
            }
            100% {
                transform: translateY(-50px) scale(0) rotate(360deg);
                opacity: 0;
            }
        }

        /* Geometric shapes */
        .geometric-shapes {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .shape {
            position: absolute;
            opacity: 0.2;
            animation: shape-float 40s infinite linear;
        }

        .light-shape {
            background: linear-gradient(45deg, #667eea, #764ba2);
            box-shadow: 0 0 30px rgba(102, 126, 234, 0.2);
        }

        .dark-shape {
            background: linear-gradient(45deg, #4facfe, #00f2fe);
            box-shadow: 0 0 30px rgba(79, 172, 254, 0.2);
        }

        .shape-triangle {
            width: 0;
            height: 0;
            border-left: 25px solid transparent;
            border-right: 25px solid transparent;
            border-bottom: 43px solid currentColor;
            background: none !important;
        }

        .shape-square {
            width: 40px;
            height: 40px;
            transform: rotate(45deg);
        }

        .shape-circle {
            width: 50px;
            height: 50px;
            border-radius: 50%;
        }

        .shape:nth-child(1) { left: 10%; animation-delay: 0s; animation-duration: 45s; }
        .shape:nth-child(2) { left: 25%; animation-delay: 8s; animation-duration: 50s; }
        .shape:nth-child(3) { left: 40%; animation-delay: 16s; animation-duration: 42s; }
        .shape:nth-child(4) { left: 55%; animation-delay: 24s; animation-duration: 48s; }
        .shape:nth-child(5) { left: 70%; animation-delay: 32s; animation-duration: 44s; }
        .shape:nth-child(6) { left: 85%; animation-delay: 40s; animation-duration: 46s; }

        @keyframes shape-float {
            0% {
                transform: translateY(100vh) rotate(0deg) scale(0.5);
                opacity: 0;
            }
            20% {
                opacity: 0.2;
                transform: translateY(80vh) rotate(72deg) scale(1);
            }
            60% {
                opacity: 0.3;
                transform: translateY(40vh) rotate(216deg) scale(1.2);
            }
            80% {
                opacity: 0.2;
                transform: translateY(20vh) rotate(288deg) scale(1);
            }
            100% {
                transform: translateY(-80px) rotate(360deg) scale(0.5);
                opacity: 0;
            }
        }

        /* Pulse effect */
        .pulse-effect {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 200px;
            height: 200px;
            border-radius: 50%;
            opacity: 0.1;
            animation: pulse 8s ease-in-out infinite;
        }

        .light-pulse {
            background: radial-gradient(circle, rgba(255, 154, 158, 0.3) 0%, transparent 70%);
        }

        .dark-pulse {
            background: radial-gradient(circle, rgba(79, 172, 254, 0.3) 0%, transparent 70%);
        }

        @keyframes pulse {
            0%, 100% {
                transform: translate(-50%, -50%) scale(0.8);
                opacity: 0.1;
            }
            50% {
                transform: translate(-50%, -50%) scale(1.2);
                opacity: 0.2;
            }
        }

        /* Wave effect */
        .wave-container {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100px;
            overflow: hidden;
        }

        .wave {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 200%;
            height: 100%;
            background: linear-gradient(45deg, transparent 30%, rgba(255, 255, 255, 0.1) 50%, transparent 70%);
            animation: wave-move 12s ease-in-out infinite;
        }

        .dark-theme .wave {
            background: linear-gradient(45deg, transparent 30%, rgba(79, 172, 254, 0.1) 50%, transparent 70%);
        }

        .wave:nth-child(2) {
            animation-delay: -4s;
            opacity: 0.5;
        }

        .wave:nth-child(3) {
            animation-delay: -8s;
            opacity: 0.3;
        }

        @keyframes wave-move {
            0%, 100% {
                transform: translateX(-50%) translateY(0);
            }
            50% {
                transform: translateX(0%) translateY(-10px);
            }
        }

        /* Main Container */
        .main-container {
            width: 100vw;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0;
            margin: 0;
        }

        .chat-container {
            width: 100%;
            height: 100vh;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 0;
            display: flex; 
            flex-direction: column; 
            overflow: hidden;
            position: relative;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
        }
        
        .dark-theme .chat-container {
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .chat-header {
            padding: 25px 30px; 
            text-align: center; 
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.1));
            backdrop-filter: blur(20px);
            border-bottom: 2px solid rgba(255, 255, 255, 0.3);
            position: relative;
            flex-shrink: 0;
            border-radius: 0;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .chat-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.5), transparent);
            animation: header-shine 3s ease-in-out infinite;
        }

        @keyframes header-shine {
            0%, 100% {
                transform: translateX(-100%);
            }
            50% {
                transform: translateX(100%);
            }
        }

        .dark-theme .chat-header {
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.2));
            border-bottom: 2px solid rgba(255, 255, 255, 0.2);
        }

        .header-content {
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
            width: 100%;
            min-height: 70px;
            position: relative;
            z-index: 2;
        }
        .header-title-group {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
        }
        .chat-header {
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: space-between;
            position: relative;
        }
        .status-indicator {
            position: static;
            margin-left: 24px;
        }
        .theme-selector {
            position: static;
            margin-right: 18px;
        }
        .clear-chat-btn {
            position: static;
            margin-left: 10px;
        }
        @media (max-width: 768px) {
            .header-title-group {
                align-items: center;
            }
            .chat-header {
                flex-direction: column;
                align-items: stretch;
                gap: 8px;
            }
            .header-content {
                flex-direction: column;
                align-items: center;
            }
            .status-indicator, .theme-selector, .clear-chat-btn {
                margin: 0;
            }
        }

        .logo {
            width: 60px;
            height: 60px;
            background: #222;
            color: #fff;
            font-weight: bold;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .logo::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: none;
            transform: rotate(45deg);
            animation: logo-shine 4s ease-in-out infinite;
        }

        @keyframes logo-shine {
            0%, 100% {
                transform: rotate(45deg) translateX(-100%);
            }
            50% {
                transform: rotate(45deg) translateX(100%);
            }
        }

        .logo:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 2px 8px rgba(0,0,0,0.12);
        }

        .dark-theme .logo {
            background: #e0e0e0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.16);
        }

        .dark-theme .logo:hover {
            box-shadow: 0 2px 8px rgba(0,0,0,0.20);
        }

        .header-text {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            position: relative;
        }

        .app-title {
            font-size: 2.2rem;
            font-weight: 900;
            background: linear-gradient(270deg, #667eea, #43e97b, #f093fb, #764ba2, #43e97b, #667eea);
            background-size: 1200% 1200%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin: 0;
            text-shadow: 0 2px 10px rgba(102, 126, 234, 0.18);
            letter-spacing: -0.5px;
            position: relative;
            animation: title-gradient-move 4s linear infinite;
        }
        @keyframes title-gradient-move {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .app-subtitle {
            font-size: 1rem;
            color: #43e97b;
            margin: 5px 0 0 0;
            font-weight: 600;
            letter-spacing: 0.5px;
            text-transform: uppercase;
            opacity: 0.9;
            animation: subtitle-pulse 2.2s ease-in-out infinite;
        }
        @keyframes subtitle-pulse {
            0%, 100% { color: #43e97b; opacity: 0.9; }
            20% { color: #667eea; opacity: 1; }
            40% { color: #f093fb; opacity: 0.95; }
            60% { color: #764ba2; opacity: 1; }
            80% { color: #43e97b; opacity: 0.95; }
        }

        .dark-theme .app-subtitle {
            color: #ccc;
        }

        /* Header status indicator */
        .status-indicator {
            position: absolute;
            top: 20px;
            left: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.8rem;
            color: #666;
            font-weight: 500;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #10b981;
            animation: status-pulse 2s ease-in-out infinite;
        }

        @keyframes status-pulse {
            0%, 100% {
                opacity: 1;
                transform: scale(1);
            }
            50% {
                opacity: 0.7;
                transform: scale(1.2);
            }
        }

        .dark-theme .status-indicator {
            color: #aaa;
        }

        /* Header decorative elements */
        .header-decoration {
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1));
            transform: skewX(-15deg);
            pointer-events: none;
        }

        .dark-theme .header-decoration {
            background: linear-gradient(90deg, transparent, rgba(79, 172, 254, 0.1));
        }

        /* Enhanced Theme Selector (Simple Button Group) */
        .theme-selector {
            position: fixed;
            top: 18px;
            right: 18px;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .theme-btn {
            width: 34px;
            height: 34px;
            border-radius: 50%;
            border: none;
            background: rgba(255,255,255,0.18);
            color: #333;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background 0.2s, box-shadow 0.2s, border 0.2s;
            box-shadow: 0 2px 8px rgba(0,0,0,0.07);
            outline: none;
            border: 2px solid transparent;
        }
        .theme-btn.active {
            background: #222;
            color: #fff;
            border: 2px solid #222;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        .dark-theme .theme-btn.active {
            background: #e0e0e0;
            color: #222;
            border: 2px solid #e0e0e0;
        }
        .theme-btn:focus {
            outline: 2px solid #667eea;
            outline-offset: 2px;
        }
        .dark-theme .theme-btn:focus {
            outline-color: #4facfe;
        }
        .theme-btn-icon {
            pointer-events: none;
        }
        @media (max-width: 768px) {
            .theme-selector {
                top: 10px;
                right: 10px;
            }
            .theme-btn {
                width: 30px;
                height: 30px;
                font-size: 1rem;
            }
        }
        @media (max-width: 480px) {
            .theme-selector {
                top: 6px;
                right: 6px;
            }
            .theme-btn {
                width: 26px;
                height: 26px;
                font-size: 0.95rem;
            }
        }
        
        .chat-messages {
            flex: 1; 
            padding: 25px; 
            overflow-y: auto; 
            display: flex; 
            flex-direction: column; 
            gap: 18px;
            scrollbar-width: thin;
            scrollbar-color: rgba(255, 255, 255, 0.3) transparent;
        }

        .chat-messages::-webkit-scrollbar {
            width: 8px;
        }

        .chat-messages::-webkit-scrollbar-track {
            background: transparent;
        }

        .chat-messages::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 4px;
        }

        .dark-theme .chat-messages::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .message { 
            padding: 18px 24px; 
            border-radius: 20px;
            max-width: 80%;
            word-break: break-word;
            font-size: 1rem;
            line-height: 1.6;
            position: relative;
            animation: messagePopIn 0.45s cubic-bezier(0.23, 1.02, 0.36, 1) both;
        }

        @keyframes messagePopIn {
            0% {
                opacity: 0;
                transform: translateY(30px) scale(0.95);
                filter: blur(2px);
            }
            60% {
                opacity: 1;
                transform: translateY(-6px) scale(1.03);
                filter: blur(0);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
                filter: blur(0);
            }
        }
        /* Typing indicator */
        .typing-indicator {
            display: flex;
            align-items: center;
            gap: 4px;
            margin: 8px 0 0 0;
            height: 24px;
            padding-left: 8px;
        }
        .typing-dot {
            width: 7px;
            height: 7px;
            border-radius: 50%;
            background: #667eea;
            opacity: 0.7;
            animation: typingBounce 1.2s infinite;
        }
        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }
        .dark-theme .typing-dot {
            background: #4facfe;
        }
        @keyframes typingBounce {
            0%, 80%, 100% { transform: translateY(0); opacity: 0.7; }
            40% { transform: translateY(-7px); opacity: 1; }
        }
        
        .user-message {
            background: #e0e0e0;
            color: #222;
            margin-left: auto;
            border-radius: 20px 20px 5px 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.04);
        }

        .dark-theme .user-message {
            background: #232526;
            color: #e0e0e0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.12);
        }
        
        .bot-message {
            background: #fff;
            color: #222;
            margin-right: auto;
            border-radius: 20px 20px 20px 5px;
            border: 1.5px solid #ececec;
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 8px rgba(0,0,0,0.04);
        }
        
        .dark-theme .bot-message {
            background: #232526;
            color: #e0e0e0;
            border: 1.5px solid #222;
            box-shadow: 0 2px 8px rgba(0,0,0,0.12);
        }
        
        .input-container {
            display: flex; 
            gap: 15px; 
            padding: 20px 25px;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(15px);
            flex-shrink: 0;
        }

        .dark-theme .input-container {
            background: rgba(0, 0, 0, 0.3);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .input-container input {
            flex: 1; 
            padding: 15px 20px; 
            border-radius: 15px; 
            border: 1px solid rgba(255, 255, 255, 0.3);
            font-size: 1rem;
            outline: none;
            background: rgba(255, 255, 255, 0.9);
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .dark-theme .input-container input {
            background: rgba(0, 0, 0, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #e0e0e0;
        }
        
        .input-container input:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
            transform: translateY(-2px);
        }

        .dark-theme .input-container input:focus {
            border-color: #4facfe;
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.2);
        }
        
        .input-container button {
            background: #222;
            color: #fff;
            border: none;
            border-radius: 15px;
            padding: 15px 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            min-width: 80px;
        }

        .dark-theme .input-container button {
            background: #e0e0e0;
            color: #222;
            box-shadow: 0 2px 8px rgba(0,0,0,0.16);
        }
        
        .input-container button:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(1, 200, 238, 0.25);
        }

        .dark-theme .input-container button:hover {
            box-shadow: 0 12px 35px rgba(58, 28, 113, 0.25);
        }
        
        .input-container button:active {
            transform: translateY(-1px);
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .main-container {
                padding: 0;
            }

            .chat-container {
                height: 100vh;
                border-radius: 0;
            }

            .chat-header {
                padding: 20px;
            }

            .status-indicator {
                top: 15px;
                left: 15px;
                font-size: 0.7rem;
            }

            .header-content {
                gap: 12px;
            }

            .logo {
                width: 45px;
                height: 45px;
                font-size: 22px;
            }

            .app-title {
                font-size: 1.6rem;
            }

            .app-subtitle {
                font-size: 0.85rem;
            }

            .header-decoration {
                width: 60px;
            }

            .theme-selector {
                right: 15px;
                top: 15px;
            }

            .theme-btn {
                width: 40px;
                height: 40px;
                font-size: 1.1rem;
            }

            .theme-btn-icon {
                font-size: 1.1rem;
            }

            .chat-messages {
                padding: 20px;
                gap: 15px;
            }

            .message {
                max-width: 90%;
                padding: 15px 20px;
                font-size: 0.95rem;
            }

            .input-container {
                padding: 20px;
                gap: 12px;
            }

            .input-container input {
                padding: 12px 16px;
                font-size: 0.95rem;
            }

            .input-container button {
                padding: 12px 20px;
                font-size: 0.95rem;
            }
        }

        @media (max-width: 480px) {
            .chat-header {
                padding: 20px 15px;
            }

            .status-indicator {
                top: 15px;
                left: 15px;
                font-size: 0.7rem;
            }

            .header-content {
                flex-direction: column;
                gap: 10px;
            }

            .logo {
                width: 45px;
                height: 45px;
                font-size: 22px;
            }

            .app-title {
                font-size: 1.5rem;
            }

            .app-subtitle {
                font-size: 0.85rem;
            }

            .header-decoration {
                width: 50px;
            }

            .chat-messages {
                padding: 20px;
                gap: 15px;
            }

            .input-container {
                padding: 15px 20px;
            }

            .theme-selector {
                right: 10px;
                top: 10px;
            }

            .theme-btn {
                width: 35px;
                height: 35px;
                font-size: 0.95rem;
            }

            .theme-btn-icon {
                font-size: 1rem;
            }

            .chat-messages {
                padding: 15px;
                gap: 12px;
            }

            .message {
                max-width: 95%;
                padding: 12px 16px;
                font-size: 0.9rem;
            }

            .input-container {
                padding: 15px;
            }

            .input-container input,
            .input-container button {
                padding: 10px 14px;
                font-size: 0.9rem;
            }
        }

        /* Accessibility improvements */
        .theme-btn:focus,
        .input-container button:focus,
        .input-container input:focus {
            outline: 2px solid #667eea;
            outline-offset: 2px;
        }

        .dark-theme .theme-btn:focus,
        .dark-theme .input-container button:focus,
        .dark-theme .input-container input:focus {
            outline-color: #4facfe;
        }

        /* Reduced motion support */
        @media (prefers-reduced-motion: reduce) {
            .particle {
                animation: none;
                opacity: 0.2;
            }
            .floating-dot {
                animation: none;
                opacity: 0.3;
            }
            .shape {
                animation: none;
                opacity: 0.1;
            }
            .pulse-effect {
                animation: none;
                opacity: 0.05;
            }
            .wave {
                animation: none;
            }
            .message {
                animation: none;
            }
        }
        .clear-chat-btn {
            position: absolute;
            top: 50px;
            left: 20px;
            right: auto;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 14px;
            padding: 0 10px;
            height: 26px;
            min-width: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            color: #fff;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s, box-shadow 0.2s, color 0.2s;
            box-shadow: 0 2px 8px rgba(0,0,0,0.07);
            z-index: 1200;
            outline: none;
            text-shadow: 0 1px 4px rgba(0,0,0,0.15);
        }
        .clear-chat-btn:hover {
            background: linear-gradient(135deg, #5a67d8 0%, #a084e8 100%);
            color: #fff;
        }
        .dark-theme .clear-chat-btn {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: #fff;
            text-shadow: 0 1px 4px rgba(0,0,0,0.25);
        }
        .dark-theme .clear-chat-btn:hover {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            color: #fff;
        }
        @media (max-width: 768px) {
            .clear-chat-btn {
                top: 36px;
                left: 12px;
                right: auto;
                height: 22px;
                min-width: 44px;
                font-size: 0.8rem;
                padding: 0 6px;
            }
        }
        @media (max-width: 480px) {
            .clear-chat-btn {
                top: 28px;
                left: 6px;
                right: auto;
                height: 20px;
                min-width: 36px;
                font-size: 0.75rem;
                padding: 0 4px;
            }
        }
        .shooting-stars {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            z-index: 2;
        }
        .shooting-star {
            position: absolute;
            width: 2px; height: 80px;
            background: #e0e0e0;
            opacity: 0.7;
            border-radius: 2px;
            filter: blur(0.5px);
            animation: shootingStarAnim 1.2s linear forwards;
        }
        @keyframes shootingStarAnim {
            0% { opacity: 0; transform: translateY(-40px) scaleX(0.7) scaleY(0.7) rotate(-15deg); }
            10% { opacity: 1; }
            80% { opacity: 1; }
            100% { opacity: 0; transform: translateY(100vh) scaleX(1.1) scaleY(1.1) rotate(-15deg); }
        }
        .ai-orb {
            position: absolute;
            right: 6vw; bottom: 10vh;
            width: 120px; height: 120px;
            border-radius: 50%;
            background: #ececec;
            box-shadow: 0 2px 8px rgba(0,0,0,0.04);
            opacity: 0.18;
            animation: orbRotate 12s linear infinite;
            z-index: 1;
        }
        .dark-theme .ai-orb {
            background: #232526;
            box-shadow: 0 2px 8px rgba(0,0,0,0.12);
        }
        @keyframes orbRotate {
            0% { transform: rotate(0deg) scale(1); }
            50% { transform: rotate(180deg) scale(1.08); }
            100% { transform: rotate(360deg) scale(1); }
        }
        .logo-anim-s {
            display: inline-block;
            animation: s-bounce 1.8s infinite cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }
        @keyframes s-bounce {
            0%, 100% { transform: scale(1) rotate(0deg); color: inherit; }
            10% { transform: scale(1.18, 0.85) rotate(-8deg); color: #0078ff; }
            20% { transform: scale(0.92, 1.12) rotate(8deg); color: #00c48c; }
            30% { transform: scale(1.12, 0.92) rotate(-6deg); color: #ffb300; }
            40% { transform: scale(0.98, 1.08) rotate(6deg); color: #ff5252; }
            50% { transform: scale(1.15) rotate(0deg); color: #0078ff; }
            60% { transform: scale(0.95) rotate(-4deg); color: #00c48c; }
            70% { transform: scale(1.08) rotate(4deg); color: #ffb300; }
            80% { transform: scale(0.98) rotate(0deg); color: #ff5252; }
            90% { transform: scale(1.05) rotate(0deg); color: #0078ff; }
        }
    </style>
</head>
<body>
    <div class="animated-bg">
        <div class="bg-particles">
            <div class="particle light-particle"></div>
            <div class="particle light-particle"></div>
            <div class="particle light-particle"></div>
            <div class="particle light-particle"></div>
            <div class="particle light-particle"></div>
            <div class="particle light-particle"></div>
            <div class="particle light-particle"></div>
            <div class="particle light-particle"></div>
            <div class="particle light-particle"></div>
        </div>
        <div class="floating-dots">
            <div class="floating-dot light-dot"></div>
            <div class="floating-dot light-dot"></div>
            <div class="floating-dot light-dot"></div>
            <div class="floating-dot light-dot"></div>
            <div class="floating-dot light-dot"></div>
            <div class="floating-dot light-dot"></div>
            <div class="floating-dot light-dot"></div>
            <div class="floating-dot light-dot"></div>
            <div class="floating-dot light-dot"></div>
            <div class="floating-dot light-dot"></div>
        </div>
        <div class="geometric-shapes">
            <div class="shape light-shape shape-triangle"></div>
            <div class="shape light-shape shape-square"></div>
            <div class="shape light-shape shape-circle"></div>
            <div class="shape light-shape shape-triangle"></div>
            <div class="shape light-shape shape-square"></div>
            <div class="shape light-shape shape-circle"></div>
        </div>
        <div class="pulse-effect light-pulse"></div>
        <div class="wave-container">
            <div class="wave"></div>
            <div class="wave"></div>
            <div class="wave"></div>
        </div>
        <!-- Animated Shooting Stars -->
        <div class="shooting-stars"></div>
        <!-- Rotating Glowing Orb -->
        <div class="ai-orb"></div>
    </div>

    <div class="main-container">
        <div class="chat-container">
            <div class="chat-header">
                <div class="status-indicator">
                    <div class="status-dot"></div>
                    <span>Online</span>
                </div>
                <div class="header-content">
                    <div class="header-title-group">
                        <h1 class="app-title">SrijanGPT</h1>
                        <p class="app-subtitle">Your AI Assistant</p>
                    </div>
                </div>
                <div class="theme-selector" id="themeSelector">
                    <button class="theme-btn" id="lightTheme" aria-label="Light Mode"><span class="theme-btn-icon">☀️</span></button>
                    <button class="theme-btn" id="darkTheme" aria-label="Dark Mode"><span class="theme-btn-icon">🌙</span></button>
                    <button class="theme-btn" id="systemTheme" aria-label="System Mode"><span class="theme-btn-icon">⚙️</span></button>
                </div>
                <button class="clear-chat-btn" id="clearChatBtn" aria-label="Clear chat" title="Clear chat">
                    Clear Chat
                </button>
                <div class="header-decoration"></div>
            </div>
            <div class="chat-messages" id="chatMessages" role="log" aria-live="polite" aria-label="Chat messages">
                <div class="message bot-message">
                    <strong>Hello! 👋</strong><br>
                    I'm <strong>SrijanGPT</strong>, your AI assistant. How can I help you today?
                </div>
            </div>
            <form class="input-container" id="chatForm" autocomplete="off" onsubmit="return false;">
                <input type="text" id="userInput" placeholder="Type your message here..." autocomplete="off" aria-label="Type your message" />
                <button type="submit" id="sendBtn" aria-label="Send message">Send</button>
            </form>
        </div>
    </div>

    <script>
        const chatMessages = document.getElementById('chatMessages');
        const userInput = document.getElementById('userInput');
        const sendBtn = document.getElementById('sendBtn');
        const chatForm = document.getElementById('chatForm');
        
        // Theme management (Simple Button Group)
        const lightTheme = document.getElementById('lightTheme');
        const darkTheme = document.getElementById('darkTheme');
        const systemTheme = document.getElementById('systemTheme');
        let currentTheme = localStorage.getItem('theme') || 'system';
        function getSystemTheme() {
            return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
        }
        function applyTheme(theme) {
            const isDark = theme === 'dark' || (theme === 'system' && getSystemTheme() === 'dark');
            document.body.classList.toggle('dark-theme', isDark);
            // Update animated background
            document.querySelectorAll('.particle').forEach(p => {
                p.classList.remove('light-particle', 'dark-particle');
                p.classList.add(isDark ? 'dark-particle' : 'light-particle');
            });
            document.querySelectorAll('.floating-dot').forEach(dot => {
                dot.classList.remove('light-dot', 'dark-dot');
                dot.classList.add(isDark ? 'dark-dot' : 'light-dot');
            });
            document.querySelectorAll('.shape').forEach(shape => {
                shape.classList.remove('light-shape', 'dark-shape');
                shape.classList.add(isDark ? 'dark-shape' : 'light-shape');
            });
            const pulseEffect = document.querySelector('.pulse-effect');
            pulseEffect.classList.remove('light-pulse', 'dark-pulse');
            pulseEffect.classList.add(isDark ? 'dark-pulse' : 'light-pulse');
            // Update active state
            lightTheme.classList.toggle('active', theme === 'light');
            darkTheme.classList.toggle('active', theme === 'dark');
            systemTheme.classList.toggle('active', theme === 'system');
            currentTheme = theme;
            localStorage.setItem('theme', theme);
        }
        lightTheme.addEventListener('click', () => applyTheme('light'));
        darkTheme.addEventListener('click', () => applyTheme('dark'));
        systemTheme.addEventListener('click', () => applyTheme('system'));
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', () => {
            if (currentTheme === 'system') applyTheme('system');
        });
        applyTheme(currentTheme);
        
        // Weather API key (replace with your own if needed)
        const WEATHER_API_KEY = '4515c95fe5fe4ecba34133023250807';
        
        function appendMessage(text, className) {
            const msgDiv = document.createElement('div');
            msgDiv.className = 'message ' + className;
            msgDiv.innerHTML = text;
            chatMessages.appendChild(msgDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
        // Stopwatch state
        let stopwatchStart = null;
        let stopwatchElapsed = 0;
        let stopwatchRunning = false;
        
        function formatStopwatch(ms) {
            const totalSeconds = Math.floor(ms / 1000);
            const hours = Math.floor(totalSeconds / 3600);
            const minutes = Math.floor((totalSeconds % 3600) / 60);
            const seconds = totalSeconds % 60;
            return (
                (hours > 0 ? String(hours).padStart(2, '0') + ':' : '') +
                String(minutes).padStart(2, '0') + ':' +
                String(seconds).padStart(2, '0')
            );
        }
        
        // Timer state
        let timerEnd = null;
        let timerDuration = 0;
        let timerRunning = false;
        let timerTimeout = null;
        
        function formatTimer(ms) {
            if (ms < 0) ms = 0;
            const totalSeconds = Math.ceil(ms / 1000);
            const minutes = Math.floor(totalSeconds / 60);
            const seconds = totalSeconds % 60;
            return (
                (minutes > 0 ? String(minutes).padStart(2, '0') + ':' : '00:') +
                String(seconds).padStart(2, '0')
            );
        }
        
        function clearTimer() {
            if (timerTimeout) clearTimeout(timerTimeout);
            timerTimeout = null;
            timerEnd = null;
            timerDuration = 0;
            timerRunning = false;
        }
        
        function timerUpNotify() {
            timerRunning = false;
            timerEnd = null;
            timerDuration = 0;
            timerTimeout = null;
            appendMessage('⏰ <strong>Timer is up!</strong>', 'bot-message');
        }
        
        // Indian states and union territories with more info
        const indiaStatesInfo = {
            'andhra pradesh': {
                capital: 'Amaravati',
                area: '162,968 km²',
                population: '49 million',
                language: 'Telugu',
                fact: 'Known for its rich cultural heritage and Kuchipudi dance.',
                food: 'Andhra Biryani, Gongura Pachadi'
            },
            'arunachal pradesh': {
                capital: 'Itanagar',
                area: '83,743 km²',
                population: '1.6 million',
                language: 'English',
                fact: 'Called the "Land of the Rising Sun" in India.',
                food: 'Thukpa, Bamboo Shoot Curry'
            },
            'assam': {
                capital: 'Dispur',
                area: '78,438 km²',
                population: '35 million',
                language: 'Assamese',
                fact: 'Famous for its tea gardens and one-horned rhinoceros.',
                food: 'Assam Laksa, Khar'
            },
            'bihar': {
                capital: 'Patna',
                area: '94,163 km²',
                population: '124 million',
                language: 'Hindi',
                fact: 'Home to the ancient Nalanda University.',
                food: 'Litti Chokha, Sattu Paratha'
            },
            'chhattisgarh': {
                capital: 'Raipur',
                area: '135,192 km²',
                population: '29 million',
                language: 'Hindi',
                fact: 'Known for its steel production and tribal culture.',
                food: 'Chana Samosa, Faraa'
            },
            'goa': {
                capital: 'Panaji',
                area: '3,702 km²',
                population: '1.5 million',
                language: 'Konkani',
                fact: 'Famous for its beautiful beaches and Portuguese heritage.',
                food: 'Goan Fish Curry, Bebinca'
            },
            'gujarat': {
                capital: 'Gandhinagar',
                area: '196,024 km²',
                population: '69 million',
                language: 'Gujarati',
                fact: 'Birthplace of Mahatma Gandhi.',
                food: 'Dhokla, Thepla'
            },
            'haryana': {
                capital: 'Chandigarh',
                area: '44,212 km²',
                population: '28 million',
                language: 'Hindi',
                fact: 'Known for its green revolution and sports achievements.',
                food: 'Bajra Khichdi, Singri ki Sabzi'
            },
            'himachal pradesh': {
                capital: 'Shimla',
                area: '55,673 km²',
                population: '7.3 million',
                language: 'Hindi',
                fact: 'Popular for its hill stations and apple orchards.',
                food: 'Dham, Sidu'
            },
            'jharkhand': {
                capital: 'Ranchi',
                area: '79,714 km²',
                population: '39 million',
                language: 'Hindi',
                fact: 'Rich in mineral resources and forests.',
                food: 'Thekua, Litti Chokha'
            },
            'karnataka': {
                capital: 'Bengaluru',
                area: '191,791 km²',
                population: '68 million',
                language: 'Kannada',
                fact: 'Known as the Silicon Valley of India.',
                food: 'Bisi Bele Bath, Mysore Pak'
            },
            'kerala': {
                capital: 'Thiruvananthapuram',
                area: '38,863 km²',
                population: '35 million',
                language: 'Malayalam',
                fact: 'Famous for its backwaters and highest literacy rate.',
                food: 'Appam with Stew, Kerala Sadya'
            },
            'madhya pradesh': {
                capital: 'Bhopal',
                area: '308,350 km²',
                population: '82 million',
                language: 'Hindi',
                fact: 'Known as the "Heart of India".',
                food: 'Poha, Bhutte ka Kees'
            },
            'maharashtra': {
                capital: 'Mumbai',
                area: '307,713 km²',
                population: '124 million',
                language: 'Marathi',
                fact: "Home to Bollywood and India's financial capital.",
                food: 'Vada Pav, Puran Poli'
            },
            'manipur': {
                capital: 'Imphal',
                area: '22,327 km²',
                population: '3 million',
                language: 'Meitei (Manipuri)',
                fact: 'Known for its classical dance and Loktak Lake.',
                food: 'Eromba, Chamthong'
            },
            'meghalaya': {
                capital: 'Shillong',
                area: '22,429 km²',
                population: '3.3 million',
                language: 'English',
                fact: 'Called the "Abode of Clouds".',
                food: 'Jadoh, Dohneiiong'
            },
            'mizoram': {
                capital: 'Aizawl',
                area: '21,081 km²',
                population: '1.2 million',
                language: 'Mizo, English, Hindi',
                fact: 'Known for its bamboo dance and hilly terrain.',
                food: 'Bai, Bamboo Shoot Fry'
            },
            'nagaland': {
                capital: 'Kohima',
                area: '16,579 km²',
                population: '2.2 million',
                language: 'English',
                fact: 'Famous for the Hornbill Festival.',
                food: 'Smoked Pork with Bamboo Shoot, Akhuni'
            },
            'odisha': {
                capital: 'Bhubaneswar',
                area: '155,707 km²',
                population: '46 million',
                language: 'Odia',
                fact: 'Known for Jagannath Temple and classical dance Odissi.',
                food: 'Dalma, Rasgulla'
            },
            'punjab': {
                capital: 'Chandigarh',
                area: '50,362 km²',
                population: '30 million',
                language: 'Punjabi',
                fact: 'Land of five rivers and birthplace of Sikhism.',
                food: 'Makki di Roti & Sarson da Saag, Butter Chicken'
            },
            'rajasthan': {
                capital: 'Jaipur',
                area: '342,239 km²',
                population: '81 million',
                language: 'Hindi',
                fact: 'Largest state by area, famous for its forts and palaces.',
                food: 'Dal Baati Churma, Ghewar'
            },
            'sikkim': {
                capital: 'Gangtok',
                area: '7,096 km²',
                population: '0.7 million',
                language: 'Nepali, English, Sikkimese, Lepcha',
                fact: "India's least populous and second smallest state.",
                food: 'Phagshapa, Momos'
            },
            'tamil nadu': {
                capital: 'Chennai',
                area: '130,058 km²',
                population: '78 million',
                language: 'Tamil',
                fact: 'Known for Dravidian-style Hindu temples.',
                food: 'Dosa, Chettinad Chicken'
            },
            'telangana': {
                capital: 'Hyderabad',
                area: '112,077 km²',
                population: '39 million',
                language: 'Telugu, Urdu',
                fact: 'Famous for Charminar and biryani.',
                food: 'Hyderabadi Biryani, Sarva Pindi'
            },
            'tripura': {
                capital: 'Agartala',
                area: '10,491 km²',
                population: '4 million',
                language: 'Bengali, Kokborok, English',
                fact: 'Known for its palaces and temples.',
                food: 'Mui Borok, Panch Phoron Tarkari'
            },
            'uttar pradesh': {
                capital: 'Lucknow',
                area: '243,286 km²',
                population: '231 million',
                language: 'Hindi',
                fact: 'Most populous state in India.',
                food: 'Tunday Kababi, Petha'
            },
            'uttarakhand': {
                capital: 'Dehradun',
                area: '53,483 km²',
                population: '11 million',
                language: 'Hindi',
                fact: 'Known as the "Land of the Gods" (Devbhumi).',
                food: 'Aloo Ke Gutke, Bal Mithai'
            },
            'west bengal': {
                capital: 'Kolkata',
                area: '88,752 km²',
                population: '99 million',
                language: 'Bengali',
                fact: 'Famous for its literature, art, and Durga Puja.',
                food: 'Rosogolla, Fish Curry'
            },
            // Union Territories
            'andaman and nicobar islands': {
                capital: 'Port Blair',
                area: '8,249 km²',
                population: '0.4 million',
                language: 'Hindi, English',
                fact: 'Famous for its pristine beaches and cellular jail.',
                food: 'Seafood, Fish Curry'
            },
            'chandigarh': {
                capital: 'Chandigarh',
                area: '114 km²',
                population: '1.1 million',
                language: 'Hindi, Punjabi, English',
                fact: 'Known for its modern architecture and urban design.',
                food: 'Chole Bhature, Butter Chicken'
            },
            'dadra and nagar haveli and daman and diu': {
                capital: 'Daman',
                area: '603 km²',
                population: '0.6 million',
                language: 'Gujarati, Hindi',
                fact: 'Known for its beaches and Portuguese heritage.',
                food: 'Fish Curry, Chicken Bullet Fry'
            },
            'delhi': {
                capital: 'New Delhi',
                area: '1,484 km²',
                population: '32 million',
                language: 'Hindi, English',
                fact: 'Capital of India and home to many historical monuments.',
                food: 'Chaat, Butter Chicken'
            },
            'lakshadweep': {
                capital: 'Kavaratti',
                area: '32 km²',
                population: '0.07 million',
                language: 'Malayalam, English',
                fact: 'Smallest union territory, known for its coral reefs.',
                food: 'Seafood, Coconut Rice'
            },
            'puducherry': {
                capital: 'Puducherry',
                area: '492 km²',
                population: '1.5 million',
                language: 'Tamil, Telugu, Malayalam, French',
                fact: 'Famous for its French colonial legacy.',
                food: 'French Baguette, Tamil Curry'
            },
            'ladakh': {
                capital: 'Leh',
                area: '59,146 km²',
                population: '0.3 million',
                language: 'Ladakhi, Hindi, English',
                fact: 'Known for its breathtaking landscapes and Buddhist monasteries.',
                food: 'Skyu, Thukpa'
            },
            'jammu and kashmir': {
                capital: 'Srinagar (summer), Jammu (winter)',
                area: '55,673 km²',
                population: '13.6 million',
                language: 'Urdu, Hindi, Kashmiri, Dogri',
                fact: 'Famous for its scenic beauty and houseboats.',
                food: 'Rogan Josh, Modur Pulav'
            }
        };
        
        async function getBotReply(message) {
            const msg = message.toLowerCase();
            
            // Info about Indian state/UT
            const infoMatch = msg.match(/(info|information|tell me about|about) ([a-zA-Z &]+)/i);
            if (infoMatch) {
                const state = infoMatch[2].trim().toLowerCase();
                if (indiaStatesInfo[state]) {
                    const s = indiaStatesInfo[state];
                    return `📍 <strong>${state.replace(/\b\w/g, c => c.toUpperCase())}</strong><br>` +
                        `Capital: <strong>${s.capital}</strong><br>` +
                        `Area: <strong>${s.area}</strong><br>` +
                        `Population: <strong>${s.population}</strong><br>` +
                        `Official Language(s): <strong>${s.language}</strong><br>` +
                        `Famous Food: <strong>${s.food}</strong><br>` +
                        `Fun Fact: <em>${s.fact}</em>`;
                } else {
                    return `Sorry, I couldn't find information for "${state}". Please check the state or union territory name.`;
                }
            }
            
            // Capital of Indian state/UT
            const capitalMatch = msg.match(/capital of ([a-zA-Z &]+)/i) || msg.match(/what is the capital of ([a-zA-Z &]+)/i);
            if (capitalMatch) {
                const state = capitalMatch[1].trim().toLowerCase();
                if (indiaCapitals[state]) {
                    return `🏛️ The capital of <strong>${state.replace(/\b\w/g, c => c.toUpperCase())}</strong> is <strong>${indiaCapitals[state]}</strong>.`;
                } else {
                    return `Sorry, I couldn't find the capital for "${state}". Please check the state or union territory name.`;
                }
            }
            
            // Timer commands
            if (/^set timer for (\d+) ?(second|seconds|minute|minutes|hour|hours)/.test(msg)) {
                const match = msg.match(/^set timer for (\d+) ?(second|seconds|minute|minutes|hour|hours)/);
                let value = parseInt(match[1], 10);
                let unit = match[2];
                let ms = 0;
                if (/hour/.test(unit)) ms = value * 60 * 60 * 1000;
                else if (/minute/.test(unit)) ms = value * 60 * 1000;
                else ms = value * 1000;
                if (ms <= 0) return '⏰ Please specify a valid timer duration.';
                clearTimer();
                timerDuration = ms;
                timerEnd = Date.now() + ms;
                timerRunning = true;
                timerTimeout = setTimeout(timerUpNotify, ms);
                return `⏳ Timer set for <strong>${formatTimer(ms)}</strong>. Type "show timer" to check or "stop timer" to cancel.`;
            }
            if (/^(stop|cancel|pause) timer/.test(msg)) {
                if (timerRunning) {
                    clearTimer();
                    return '⏹️ Timer stopped.';
                } else {
                    return '⏹️ No timer is running.';
                }
            }
            if (/^(reset|clear) timer/.test(msg)) {
                clearTimer();
                return '🔄 Timer reset.';
            }
            if (/^(show|check|display) timer/.test(msg)) {
                if (timerRunning && timerEnd) {
                    const ms = timerEnd - Date.now();
                    return `⏳ Time remaining: <strong>${formatTimer(ms)}</strong>.`;
                } else {
                    return '⏳ No timer is running.';
                }
            }
            
            // Stopwatch commands
            if (/^(start|begin) stopwatch/.test(msg)) {
                if (!stopwatchRunning) {
                    stopwatchStart = Date.now();
                    stopwatchRunning = true;
                    return '⏱️ Stopwatch started! Type "stop stopwatch" to stop or "show stopwatch" to see the time.';
                } else {
                    return '⏱️ Stopwatch is already running!';
                }
            }
            if (/^(stop|pause) stopwatch/.test(msg)) {
                if (stopwatchRunning) {
                    stopwatchElapsed += Date.now() - stopwatchStart;
                    stopwatchRunning = false;
                    return `⏹️ Stopwatch stopped. Elapsed time: <strong>${formatStopwatch(stopwatchElapsed)}</strong>.`;
                } else {
                    return '⏹️ Stopwatch is not running.';
                }
            }
            if (/^(reset|clear) stopwatch/.test(msg)) {
                stopwatchStart = null;
                stopwatchElapsed = 0;
                stopwatchRunning = false;
                return '🔄 Stopwatch reset to 00:00.';
            }
            if (/^(show|check|display) stopwatch/.test(msg)) {
                let elapsed = stopwatchElapsed;
                if (stopwatchRunning) {
                    elapsed += Date.now() - stopwatchStart;
                }
                return `⏱️ Elapsed time: <strong>${formatStopwatch(elapsed)}</strong>.`;
            }
            
            // Weather
            if (/weather|temperature|rain|sunny|forecast/.test(msg)) {
                const cityMatch = message.match(/(?:in|at|for)\s+([a-zA-Z\s]+)/i);
                const city = cityMatch ? cityMatch[1].trim() : null;
                if (!city) return "Please specify a city for the weather information. 🌍";
                try {
                    const response = await fetch(`https://api.weatherapi.com/v1/current.json?key=${WEATHER_API_KEY}&q=${encodeURIComponent(city)}`);
                    const data = await response.json();
                    if (data.error) return `Sorry, couldn't get weather for "${city}": ${data.error.message} 😔`;
                    return `🌤️ <strong>Weather in ${data.location.name}, ${data.location.country}</strong><br>
                    <strong>Condition:</strong> ${data.current.condition.text}<br>
                    <strong>Temperature:</strong> ${data.current.temp_c}°C<br>
                    <strong>Humidity:</strong> ${data.current.humidity}%<br>
                    <strong>Wind:</strong> ${data.current.wind_kph} kph`;
                } catch (e) {
                    return `Sorry, couldn't get weather for "${city}" (network error). 🌐`;
                }
            }
            
            // Math solver
            const mathExpr = message.match(/^\s*([-+/*()0-9.\s^%]+)\s*$/);
            if (mathExpr) {
                try {
                    let expr = message.replace(/\^/g, '**');
                    if (/[^0-9)][+/*%]{2,}/.test(expr)) throw new Error('Invalid expression');
                    let result = Function('"use strict";return (' + expr + ')')();
                    if (typeof result === 'number' && isFinite(result)) {
                        return `🧮 <strong>Calculation Result:</strong><br>The answer is: <strong>${result}</strong>`;
                    } else {
                        return "Sorry, I couldn't solve that math expression. 🤔";
                    }
                } catch (e) {
                    return "Sorry, I couldn't solve that math expression. 🤔";
                }
            }

            // General conversation enhancements
            if (/\b(hi|hello|hey|good morning|good afternoon|good evening)\b/.test(msg)) {
                const greetings = [
                    "Hello! 👋 How can I help you today?",
                    "Hi there! 😊 What can I do for you?",
                    "Hey! Need any assistance?",
                    "Greetings! How may I assist you?"
                ];
                return greetings[Math.floor(Math.random() * greetings.length)];
            }
            if (/\b(thank you|thanks|thx|ty)\b/.test(msg)) {
                const thanks = [
                    "You're welcome! 😊",
                    "Happy to help!",
                    "Anytime! If you need more help, just ask.",
                    "Glad I could assist!"
                ];
                return thanks[Math.floor(Math.random() * thanks.length)];
            }
            if (/\b(bye|goodbye|see you|cya|farewell)\b/.test(msg)) {
                const farewells = [
                    "Goodbye! 👋 Have a great day!",
                    "See you soon!",
                    "Take care! If you need me, just chat again.",
                    "Bye! 😊"
                ];
                return farewells[Math.floor(Math.random() * farewells.length)];
            }
            if (/\b(who are you|what are you|your name|about you)\b/.test(msg)) {
                return "I'm SrijanGPT, your friendly AI assistant!";
            }
            if (/\b(joke|make me laugh|funny)\b/.test(msg)) {
                const jokes = [
                    "Why did the computer show up at work late? It had a hard drive! 😄",
                    "Why do programmers prefer dark mode? Because light attracts bugs! 🐞",
                    "Why was the math book sad? Because it had too many problems. 📚",
                    "Why did the AI go to school? To improve its neural network! 🤖"
                ];
                return jokes[Math.floor(Math.random() * jokes.length)];
            }
            if (/\b(how are you|how's it going|how do you do)\b/.test(msg)) {
                const moods = [
                    "I'm just a bunch of code, but I'm feeling helpful! 😊",
                    "I'm always ready to assist you!",
                    "Doing great, thanks for asking! How can I help you?",
                    "I'm here and ready to chat!"
                ];
                return moods[Math.floor(Math.random() * moods.length)];
            }
            if (/\b(who made you|who created you|your creator|your developer)\b/.test(msg)) {
                return "I was created by Srijan, designed to help you with your questions and tasks! 🚀";
            }
            if (/\b(you are (awesome|great|amazing|smart|cool|nice|helpful))\b/.test(msg)) {
                const compliments = [
                    "Thank you! You're awesome too! 😊",
                    "You're too kind! Let me know if you need anything else.",
                    "That means a lot! I'm here to help whenever you need.",
                    "Thanks! I'm always learning to be even better."
                ];
                return compliments[Math.floor(Math.random() * compliments.length)];
            }
            if (/\b(what can you do|help|features|abilities|skills)\b/.test(msg)) {
                return "I can help you with weather information, math calculations, jokes, and general conversations. Just ask me anything! ✨";
            }
            if (/\b(time)\b/.test(msg)) {
                const now = new Date();
                return `⏰ The current time is <strong>${now.toLocaleTimeString()}</strong>.`;
            }
            if (/\b(date|day|today)\b/.test(msg)) {
                const now = new Date();
                return `📅 Today is <strong>${now.toLocaleDateString(undefined, { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}</strong>.`;
            }
            // Fallback
            const fallbacks = [
                "I'm SrijanGPT! I can help you with weather, math, jokes, and more. Try asking me about the weather in your city, or give me a math problem! ✨",
                "I'm here to assist you with information, calculations, and a friendly chat. 😊",
                "Not sure I understood that, but I'm always here to help! Try asking about weather, math, or just say hi!",
                "I'm your AI assistant. Ask me anything about weather, math, or just have a conversation!"
            ];
            return fallbacks[Math.floor(Math.random() * fallbacks.length)];
        }
        
        function showTypingIndicator() {
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message bot-message typing-indicator-container';
            typingDiv.innerHTML = '<div class="typing-indicator" aria-label="Bot is typing"><div class="typing-dot"></div><div class="typing-dot"></div><div class="typing-dot"></div></div>';
            chatMessages.appendChild(typingDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            return typingDiv;
        }
        function removeTypingIndicator() {
            const typing = chatMessages.querySelector('.typing-indicator-container');
            if (typing) typing.remove();
        }
        
        function sendMessage() {
            const text = userInput.value.trim();
            if (!text) return;
            
            appendMessage(text, 'user-message');
            userInput.value = '';
            
            // Disable input while processing
            userInput.disabled = true;
            sendBtn.disabled = true;
            
            // Show typing indicator
            const typingDiv = showTypingIndicator();
            setTimeout(async () => {
                const reply = await getBotReply(text);
                removeTypingIndicator();
                appendMessage(reply, 'bot-message');
                
                // Re-enable input
                userInput.disabled = false;
                sendBtn.disabled = false;
                userInput.focus();
            }, 500);
        }
        
        sendBtn.addEventListener('click', sendMessage);
        chatForm.addEventListener('submit', sendMessage);
        userInput.addEventListener('keydown', function(e) {
            if (e.key === 'Enter') sendMessage();
        });
        
        // Focus management for accessibility
        userInput.focus();
        
        // Keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                userInput.blur();
            }
        });

        // Clear chat functionality
        const clearChatBtn = document.getElementById('clearChatBtn');
        clearChatBtn.addEventListener('click', () => {
            const welcome = `<div class=\"message bot-message\">\n                    <strong>Hello! 👋</strong><br>\n                    I'm <strong>SrijanGPT</strong>, your AI assistant. How can I help you today?\n                </div>`;
            chatMessages.innerHTML = welcome;
        });
        // Shooting stars logic
        function spawnShootingStar() {
            const container = document.querySelector('.shooting-stars');
            if (!container) return;
            const star = document.createElement('div');
            star.className = 'shooting-star';
            // Random horizontal position and delay
            const left = Math.random() * 90 + 2;
            star.style.left = left + 'vw';
            star.style.top = (Math.random() * 30 + 2) + 'vh';
            container.appendChild(star);
            setTimeout(() => star.remove(), 1300);
        }
        setInterval(() => {
            if (Math.random() < 0.5) spawnShootingStar();
        }, 1800);
    </script>
</body>
</html>